daemon off;
# Heroku dynos have at least 4 cores
worker_processes <%= ENV['NGINX_WORKERS'] || 4 %>;

events {
    use epoll;
    accept_mutex on;
    worker_connections <%= ENV['NGINX_WORKER_CONNECTIONS'] || 1024 %>;
}

http {
    
	upstream backend {
		server prx1proton.herokuapp.com;
	}

    server {
        listen <%= ENV["PORT"] %>;
        server_name _;

        location / {
            proxy_pass https://backend;
			proxy_set_header Host $upstream_addr;
			proxy_set_header X-Forwarded-For $remote_addr;
			proxy_set_header X-Host $host;
        }
    }
}
